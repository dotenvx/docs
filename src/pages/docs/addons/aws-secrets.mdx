import { ScreenshotBrowser } from '@/components/ScreenshotBrowser'

export const description = 'Sync your secrets to AWS Secrets when an environment variable is changed.'

##### [Add-ons](/docs/addons)
# AWS Secrets

Sync your secrets to AWS Secrets when an environment variable is changed.

## Step 1

Navigate to the add-ons page. Click AWS Secrets. Then click Connect AWS Secrets.

<ScreenshotBrowser url='/assets/img/cloudinary/development-Dotenv_15_mg2ty6.png' />

## Step 2

On the next page, generate your [AWS IAM User](https://us-east-1.console.aws.amazon.com/iamv2/home#/users) and paste in the credentials.

<ScreenshotBrowser url='/assets/img/cloudinary/development-Dotenv_16_vbnmf5.png' />

<ScreenshotBrowser url='/assets/img/cloudinary/IAM-Management-Console_rkcvqe.png' />

<ScreenshotBrowser url='/assets/img/cloudinary/IAM-Management-Console_1_ntzh25.png' />

<ScreenshotBrowser url='/assets/img/cloudinary/IAM-Management-Console_2_coxt9d.png' />

Important: The AWS IAM user must have correct permissions. Below is an example. Modify for your security needs.

```json {{ title: "example iam user policy" }}
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Sid": "VisualEditor0",
            "Effect": "Allow",
            "Action": [
                "secretsmanager:UntagResource",
                "secretsmanager:DescribeSecret",
                "secretsmanager:DeleteResourcePolicy",
                "secretsmanager:PutSecretValue",
                "secretsmanager:CreateSecret",
                "secretsmanager:DeleteSecret",
                "secretsmanager:CancelRotateSecret",
                "secretsmanager:ListSecretVersionIds",
                "secretsmanager:UpdateSecret",
                "secretsmanager:GetRandomPassword",
                "secretsmanager:GetResourcePolicy",
                "secretsmanager:GetSecretValue",
                "secretsmanager:StopReplicationToReplica",
                "secretsmanager:PutResourcePolicy",
                "secretsmanager:ReplicateSecretToRegions",
                "secretsmanager:RestoreSecret",
                "secretsmanager:RotateSecret",
                "secretsmanager:UpdateSecretVersionStage",
                "secretsmanager:ValidateResourcePolicy",
                "secretsmanager:RemoveRegionsFromReplication",
                "secretsmanager:ListSecrets",
                "secretsmanager:TagResource"
            ],
            "Resource": "*"
        }
    ]
}
```

## Step 3

Lastly, set up the AWS Secrets config path and region.

<ScreenshotBrowser url='/assets/img/cloudinary/development-Dotenv_17_pmxu4z.png' />

That's it! Your secrets are now synced to AWS Secrets and will continue to stay in sync when you modify your secrets.

Thank you for using Dotenv with AWS Secrets.
