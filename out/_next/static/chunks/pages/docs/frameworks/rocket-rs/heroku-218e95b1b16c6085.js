(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9167],{2178:function(n,s,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/docs/frameworks/rocket-rs/heroku",function(){return e(4598)}])},9061:function(n,s,e){"use strict";e.d(s,{N:function(){return a}});var o=e(5893);function a(n){return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{className:"flex",children:[(0,o.jsx)("div",{className:"flex-grow",children:(0,o.jsxs)("h5",{children:[(0,o.jsx)("a",{href:"/docs#frameworks",children:"Frameworks"})," ",n.framework?(0,o.jsxs)("span",{children:["› ",(0,o.jsx)("a",{href:n.url,children:n.framework})]}):(0,o.jsx)("span",{})]})}),(0,o.jsx)("div",{className:"flex flex-shrink justify-end gap-2",children:n.icon})]})})}},5404:function(n,s,e){"use strict";e.d(s,{X:function(){return a}});var o=e(5893);function a(n){return(0,o.jsx)("p",{className:"lead mt-1",children:n.lead})}},1370:function(n,s,e){"use strict";e.d(s,{c:function(){return t}});var o=e(5893),a=e(5675),r=e.n(a);function t(n){return(0,o.jsx)("div",{className:"w-full p-7 bg-zinc-100 dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-md",children:(0,o.jsxs)("div",{className:"border border-zinc-300 dark:border-zinc-800 text-zinc-100 text-sm subpixel-antialiased rounded-lg leading-normal overflow-hidden shadow-lg",children:[(0,o.jsx)("div",{className:"p-0 bg-zinc-200 dark:bg-black border-b border-zinc-300 dark:border-zinc-800",children:(0,o.jsxs)("div",{className:"flex py-1 px-2",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-1.5",children:[(0,o.jsx)("span",{className:"h-2 w-2 bg-red-500/70 dark:bg-red-500/30 rounded-full"}),(0,o.jsx)("span",{className:"h-2 w-2 bg-orange-300/70 dark:bg-orange-300/30 rounded-full"}),(0,o.jsx)("span",{className:"h-2 w-2 bg-green-500/70 dark:bg-green-500/30 rounded-full"})]}),(0,o.jsx)("div",{className:"text-right w-full text-zinc-400 text-xs",children:n.www})]})}),(0,o.jsx)("div",{className:"p-0",children:(0,o.jsx)("a",{href:n.url,target:"_blank",rel:"noreferrer",className:"hover:brightness-105",children:(0,o.jsx)(r(),{src:n.url,width:"0",height:"0",alt:"",className:"p-0 m-0 w-full",unoptimized:!0})})})]})})}},9422:function(n,s,e){"use strict";e.d(s,{P:function(){return a}});var o=e(5893);function a(n){return(0,o.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",...n,children:(0,o.jsx)("path",{d:"M20.61 0H3.39C2.189 0 1.23.96 1.23 2.16v19.681c0 1.198.959 2.159 2.16 2.159h17.22c1.2 0 2.159-.961 2.159-2.159V2.16C22.77.96 21.811 0 20.61 0zm.96 21.841c0 .539-.421.96-.96.96H3.39c-.54 0-.96-.421-.96-.96V2.16c0-.54.42-.961.96-.961h17.22c.539 0 .96.421.96.961v19.681zM6.63 20.399L9.33 18l-2.7-2.4v4.799zm9.72-9.719c-.479-.48-1.379-1.08-2.879-1.08-1.621 0-3.301.421-4.5.84V3.6h-2.4v10.38l1.68-.78s2.76-1.26 5.16-1.26c1.2 0 1.5.66 1.5 1.26v7.2h2.4v-7.2c.059-.179.059-1.501-.961-2.52zM13.17 7.5h2.4c1.08-1.26 1.62-2.521 1.8-3.9h-2.399c-.241 1.379-.841 2.64-1.801 3.9z"})})}},3636:function(n,s,e){"use strict";e.d(s,{I:function(){return a}});var o=e(5893);function a(n){return(0,o.jsxs)("svg",{fill:"currentColor",role:"img",viewBox:"0 0 25 25",...n,children:[(0,o.jsx)("defs",{children:(0,o.jsx)("path",{d:"M3.44258418,12.681062 C3.44258418,13.3070149 3.60419236,13.8623097 3.92696839,14.3252721 L2.79835317,15.4384626 C2.67857816,15.5659074 2.76664802,15.6539049 2.89346861,15.7791822 L3.77945138,16.6474534 C3.90142813,16.7748981 3.9842138,16.853359 4.10883265,16.7285152 L5.33300367,15.5242928 C5.60778162,15.6235609 6.26698451,15.7965216 7.2639353,15.6526044 L8.03014306,15.0843051 C8.08738846,15.04139 8.18734775,14.9781012 8.25340014,14.9425554 L8.94166608,14.5719253 L8.38990842,15.1207179 C8.33706651,15.1731696 8.24723525,15.2507635 8.1904302,15.293245 L7.53166766,15.7817831 L8.65455835,18.8062107 C8.67741516,18.868289 8.73062218,18.9147707 8.79595314,18.9297332 C8.8612841,18.9446957 8.92986947,18.9261078 8.97821507,18.8803367 L11.6137056,16.4125043 C11.644439,16.3837221 11.6650998,16.3460802 11.6727124,16.305 L12.2636611,13.0542929 C12.9823111,12.442645 13.7097682,11.730862 14.4270972,10.9380172 C18.5558121,6.37341595 19.1718607,2.8058311 19.1718607,1.08576103 C19.1718607,0.519195612 19.1018452,0.207086123 19.0992031,0.194081561 C19.0814373,0.116651279 19.0179685,0.0574241531 18.9384756,0.0440956125 C18.7332728,0.00941678048 13.8387905,-0.733143711 7.46913806,5.53288776 C7.46121178,5.54155746 6.63379546,6.38121869 5.74296886,7.55899852 L2.47205435,8.45414587 C2.43305722,8.46490087 2.39833232,8.48713536 2.37253541,8.51786823 L0.0457297693,11.270067 C0.00302875761,11.3208379 -0.0108788703,11.389342 0.00871894336,11.4523694 C0.0283167571,11.5153969 0.0787934502,11.5645005 0.143046962,11.5830435 L3.26952691,12.4777574 L3.7957443,11.8817149 C3.84242133,11.8288297 3.92564734,11.7482014 3.98201205,11.700518 L4.569438,11.2050442 L4.15330793,11.8466026 C4.10558821,11.9188867 4.05322682,11.9880963 3.99654358,12.0538086 L3.44258418,12.681062 L3.44258418,12.681062 Z M10.34594,6.01145564 C11.3798801,4.99363192 12.8532888,4.79336166 13.6366702,5.56496568 C14.4204919,6.33656969 14.2174909,7.78657836 13.1831104,8.80483556 C12.1491703,9.82265928 10.6762019,10.0224961 9.89238019,9.25132552 C9.10855846,8.47972151 9.31199983,7.02927936 10.34594,6.01145564 Z",id:"path-1"})}),(0,o.jsxs)("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:[(0,o.jsx)("rect",{id:"Rectangle",x:"0.305411867",y:"0.623413507",width:"24",height:"24"}),(0,o.jsx)("g",{id:"logo-small",transform:"translate(0.305412, 0.623414)",children:(0,o.jsxs)("g",{id:"Group",transform:"translate(11.988803, 11.975823) rotate(2.000000) translate(-11.988803, -11.975823) translate(0.594864, 0.569883)",children:[(0,o.jsxs)("g",{id:"Path",transform:"translate(3.157784, 0.186698)",children:[(0,o.jsx)("mask",{id:"mask-2",fill:"white",children:(0,o.jsx)("use",{href:"#path-1"})}),(0,o.jsx)("use",{id:"Mask",fill:"currentColor",fillRule:"nonzero",href:"#path-1"}),(0,o.jsx)("path",{d:"M10.3393347,6.02272626 C11.3732748,5.00446905 12.8466836,4.80463228 13.6300649,5.5762363 C14.4138867,6.34784031 14.2108857,7.79784898 13.1765052,8.8156727 C12.1425651,9.8339299 10.6695967,10.0337667 9.88577495,9.26216266 C9.10195322,8.49055865 9.30539459,7.04054998 10.3393347,6.02272626 Z",fillOpacity:"0.1",fill:"currentColor",fillRule:"nonzero",mask:"url(#mask-2)"})]}),(0,o.jsx)("path",{d:"M6.50435197,17.2776265 L2.5257739,21.1608107 C2.5019046,21.1841682 2.36909776,21.0914089 2.22903294,20.953551 L1.97689556,20.7054175 C1.90973572,20.6393092 1.84985699,20.5714408 1.8104388,20.51675 C1.7710206,20.4620593 1.75529372,20.4250288 1.76671936,20.4138088 L5.74449186,16.5296843 C5.76836116,16.5063267 5.901168,16.5990861 6.04123282,16.7369439 L6.29381055,16.985511 C6.36097039,17.0516192 6.42084911,17.1194877 6.46026731,17.1741784 C6.4996855,17.2288692 6.51541239,17.2658996 6.50398644,17.2771194 M7.50841356,18.8788574 L3.52968584,22.7621888 C3.50581654,22.7855464 3.3730097,22.692787 3.23294488,22.5549292 L2.98062474,22.3065421 C2.9134649,22.2404339 2.85358617,22.1725654 2.81416798,22.1178746 C2.77474978,22.0631839 2.7590229,22.0261534 2.77044854,22.0149334 L6.74866139,18.1312424 C6.77253069,18.1078848 6.90533753,18.2006442 7.04540235,18.338502 L7.29753973,18.5866356 C7.36469957,18.6527438 7.42457829,18.7206123 7.46399649,18.775303 C7.50341468,18.8299938 7.51914157,18.8670243 7.50771562,18.878244 M0.831777194,20.1061141 C0.807590773,20.1291111 0.675018036,20.0365147 0.53503703,19.8988537 L0.282384477,19.6503603 C0.215224638,19.5842521 0.155345828,19.5163837 0.115927483,19.4616931 C0.0765091388,19.4070025 0.0607820526,19.3699722 0.0722074841,19.3587524 L4.04998158,15.4746263 C4.07385044,15.4512692 4.20665692,15.5440289 4.34672174,15.6818868 L4.59929947,15.9304538 C4.66645931,15.996562 4.72633812,16.0644304 4.76575646,16.119121 C4.80517481,16.1738116 4.82090189,16.2108419 4.80947646,16.2220617 L0.832142718,20.1066212 L0.831777194,20.1061141 Z",id:"Shape",fill:"currentColor",fillRule:"nonzero"})]})})]})]})}},4598:function(n,s,e){"use strict";e.r(s),e.d(s,{__N_SSG:function(){return h}});var o=e(5893),a=e(1151),r=e(1490),t=e(1370),l=e(5404),i=e(9061),c=e(9422),p=e(3636);function d(n){let s=Object.assign({h1:"h1",p:"p",h2:"h2",a:"a",pre:"pre",code:"code"},(0,a.ah)(),n.components),{Note:e}=s;return e||function(n,s){throw Error("Expected "+(s?"component":"object")+" `"+n+"` to be defined: you likely forgot to import, pass, or provide it.")}("Note",!0),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.N,{framework:"Rocket",url:"/docs/frameworks/rocket-rs",icon:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(p.I,{className:"h-9 w-9 text-[#C3454C]"}),(0,o.jsx)(c.P,{className:"h-9 w-9 text-[#430098]"})]})}),"\n",(0,o.jsx)(s.h1,{children:"Deploy a Rocket App to Heroku"}),"\n",(0,o.jsx)(l.X,{lead:"Deploy a Rocket app with an encrypted .env.vault file to Heroku."}),"\n",(0,o.jsx)(e,{children:(0,o.jsxs)(s.p,{children:["Find a complete ",(0,o.jsx)("a",{href:"https://github.com/dotenv-org/examples/tree/master/rocket-rs/heroku",children:"code example on GitHub"})," for this guide."]})}),"\n",(0,o.jsx)(s.h2,{id:"initial-setup",children:"Initial setup"}),"\n",(0,o.jsxs)(s.p,{children:["Install ",(0,o.jsx)(s.a,{href:"https://github.com/SergioBenitez/Rocket",children:"rocket"}),"."]}),"\n",(0,o.jsx)(s.pre,{code:"cargo new yourapp\ncd yourapp\ncargo add rocket\n",children:(0,o.jsx)(s.code,{children:"cargo new yourapp\ncd yourapp\ncargo add rocket\n"})}),"\n",(0,o.jsx)(s.p,{children:"Rocket uses advanced Rust features so install the nightly version of Rust."}),"\n",(0,o.jsx)(s.pre,{code:"rustup override set nightly\n",children:(0,o.jsx)(s.code,{children:"rustup override set nightly\n"})}),"\n",(0,o.jsxs)(s.p,{children:["Modify ",(0,o.jsx)(s.code,{children:"src/main.rs"})," file with the web server code."]}),"\n",(0,o.jsx)(s.pre,{language:"rust",code:'#![feature(proc_macro_hygiene, decl_macro)]\n\n#[macro_use] extern crate rocket;\n\n#[get("/")]\nfn index() -> String {\n    let hello = std::env::var("HELLO").unwrap_or("".to_string());\n    format!("Hello {}.", hello)\n}\n\nfn main() {\n    rocket::ignite().mount("/", routes![index]).launch();\n}\n',children:(0,o.jsx)(s.code,{className:"language-rust",children:'<span><span style="color: var(--shiki-color-text)">#</span><span style="color: var(--shiki-token-keyword)">!</span><span style="color: var(--shiki-color-text)">[feature(proc_macro_hygiene, decl_macro)]</span></span>\n<span></span>\n<span><span style="color: var(--shiki-color-text)">#[macro_use] </span><span style="color: var(--shiki-token-keyword)">extern</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">crate</span><span style="color: var(--shiki-color-text)"> rocket;</span></span>\n<span></span>\n<span><span style="color: var(--shiki-color-text)">#[get(</span><span style="color: var(--shiki-token-string-expression)">&quot;/&quot;</span><span style="color: var(--shiki-color-text)">)]</span></span>\n<span><span style="color: var(--shiki-token-keyword)">fn</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">index</span><span style="color: var(--shiki-color-text)">() </span><span style="color: var(--shiki-token-keyword)">-&gt;</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">String</span><span style="color: var(--shiki-color-text)"> {</span></span>\n<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">let</span><span style="color: var(--shiki-color-text)"> hello </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> std</span><span style="color: var(--shiki-token-keyword)">::</span><span style="color: var(--shiki-color-text)">env</span><span style="color: var(--shiki-token-keyword)">::</span><span style="color: var(--shiki-token-function)">var</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&quot;HELLO&quot;</span><span style="color: var(--shiki-color-text)">)</span><span style="color: var(--shiki-token-keyword)">.</span><span style="color: var(--shiki-token-function)">unwrap_or</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&quot;&quot;</span><span style="color: var(--shiki-token-keyword)">.</span><span style="color: var(--shiki-token-function)">to_string</span><span style="color: var(--shiki-color-text)">());</span></span>\n<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-function)">format!</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&quot;Hello {}.&quot;</span><span style="color: var(--shiki-color-text)">, hello)</span></span>\n<span><span style="color: var(--shiki-color-text)">}</span></span>\n<span></span>\n<span><span style="color: var(--shiki-token-keyword)">fn</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">main</span><span style="color: var(--shiki-color-text)">() {</span></span>\n<span><span style="color: var(--shiki-color-text)">    rocket</span><span style="color: var(--shiki-token-keyword)">::</span><span style="color: var(--shiki-token-function)">ignite</span><span style="color: var(--shiki-color-text)">()</span><span style="color: var(--shiki-token-keyword)">.</span><span style="color: var(--shiki-token-function)">mount</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&quot;/&quot;</span><span style="color: var(--shiki-color-text)">, </span><span style="color: var(--shiki-token-function)">routes!</span><span style="color: var(--shiki-color-text)">[index])</span><span style="color: var(--shiki-token-keyword)">.</span><span style="color: var(--shiki-token-function)">launch</span><span style="color: var(--shiki-color-text)">();</span></span>\n<span><span style="color: var(--shiki-color-text)">}</span></span>\n<span></span>'}),title:"sr/main.rs"}),"\n",(0,o.jsxs)(s.p,{children:["Add a ",(0,o.jsx)(s.code,{children:"Procfile"})," to run your app on Heroku."]}),"\n",(0,o.jsx)(s.pre,{language:"yaml",code:"web: ROCKET_PORT=$PORT ROCKET_KEEP_ALIVE=0 ./target/release/yourapp\n",children:(0,o.jsx)(s.code,{className:"language-yaml",children:'<span><span style="color: var(--shiki-token-keyword)">web</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">ROCKET_PORT=$PORT ROCKET_KEEP_ALIVE=0 ./target/release/yourapp</span></span>\n<span></span>'}),title:"Procfile"}),"\n",(0,o.jsxs)(s.p,{children:["Create a ",(0,o.jsx)(s.code,{children:"rust-toolchain"})," file to tell Heroku to run the nightly rust version."]}),"\n",(0,o.jsx)(s.pre,{language:"yaml",code:"nightly-2023-11-15\n",children:(0,o.jsx)(s.code,{className:"language-yaml",children:'<span><span style="color: var(--shiki-token-string-expression)">nightly-2023-11-15</span></span>\n<span></span>'}),title:"rust-toolchain"}),"\n",(0,o.jsx)(s.p,{children:"Commit that to code, set the rust buildpack, and push it to Heroku."}),"\n",(0,o.jsx)(s.pre,{language:"shell",code:"heroku create\nheroku buildpacks:set emk/rust\ngit push heroku\n",children:(0,o.jsx)(s.code,{className:"language-shell",children:'<span><span style="color: var(--shiki-color-text)">heroku create</span></span>\n<span><span style="color: var(--shiki-color-text)">heroku buildpacks:set emk/rust</span></span>\n<span><span style="color: var(--shiki-color-text)">git push heroku</span></span>\n<span></span>'})}),"\n",(0,o.jsx)(t.c,{url:"/assets/img/docs/hello-blank.png",www:"yourapp.herokuapp.com"}),"\n",(0,o.jsxs)(s.p,{children:["Once deployed, your app will say ",(0,o.jsx)(s.code,{children:"Hello ."})," as it doesn't have a way to access the environment variable yet. Let's do that next."]}),"\n",(0,o.jsx)(s.h2,{id:"install-dotenv-vault",children:"Install dotenv-vault"}),"\n",(0,o.jsxs)(s.p,{children:["Install ",(0,o.jsx)(s.a,{href:"https://github.com/Minebomber/dotenv-vault-rs",children:(0,o.jsx)(s.code,{children:"dotenv-vault"})}),"."]}),"\n",(0,o.jsx)(s.pre,{language:"shell",code:"cargo add dotenv-vault\n",children:(0,o.jsx)(s.code,{className:"language-shell",children:'<span><span style="color: var(--shiki-color-text)">cargo add dotenv-vault</span></span>\n<span></span>'})}),"\n",(0,o.jsxs)(s.p,{children:["Create a ",(0,o.jsx)(s.code,{children:".env"})," file in the root of your project."]}),"\n",(0,o.jsx)(s.pre,{language:"shell",code:'# .env\nHELLO="World"\n',children:(0,o.jsx)(s.code,{className:"language-shell",children:'<span><span style="color: var(--shiki-token-comment)"># .env</span></span>\n<span><span style="color: var(--shiki-color-text)">HELLO=</span><span style="color: var(--shiki-token-string-expression)">&quot;World&quot;</span></span>\n<span></span>'}),title:".env"}),"\n",(0,o.jsxs)(s.p,{children:["As early as possible in your ",(0,o.jsx)(s.code,{children:"main"})," function, load dotenv."]}),"\n",(0,o.jsx)(s.pre,{language:"rust",code:'...\n\nfn main() {\n    let _ = dotenv_vault::dotenv();\n\n    rocket::ignite().mount("/", routes![index]).launch();\n}\n',children:(0,o.jsx)(s.code,{className:"language-rust",children:'<span><span style="color: var(--shiki-token-keyword)">...</span></span>\n<span></span>\n<span><span style="color: var(--shiki-token-keyword)">fn</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">main</span><span style="color: var(--shiki-color-text)">() {</span></span>\n<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">let</span><span style="color: var(--shiki-color-text)"> _ </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> dotenv_vault</span><span style="color: var(--shiki-token-keyword)">::</span><span style="color: var(--shiki-token-function)">dotenv</span><span style="color: var(--shiki-color-text)">();</span></span>\n<span></span>\n<span><span style="color: var(--shiki-color-text)">    rocket</span><span style="color: var(--shiki-token-keyword)">::</span><span style="color: var(--shiki-token-function)">ignite</span><span style="color: var(--shiki-color-text)">()</span><span style="color: var(--shiki-token-keyword)">.</span><span style="color: var(--shiki-token-function)">mount</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&quot;/&quot;</span><span style="color: var(--shiki-color-text)">, </span><span style="color: var(--shiki-token-function)">routes!</span><span style="color: var(--shiki-color-text)">[index])</span><span style="color: var(--shiki-token-keyword)">.</span><span style="color: var(--shiki-token-function)">launch</span><span style="color: var(--shiki-color-text)">();</span></span>\n<span><span style="color: var(--shiki-color-text)">}</span></span>\n<span></span>'}),title:"src/main.rs"}),"\n",(0,o.jsx)(s.p,{children:"Try running it locally."}),"\n",(0,o.jsx)(s.pre,{language:"shell",code:"cargo run\n\nRocket has launched from http://localhost:8000\n",children:(0,o.jsx)(s.code,{className:"language-shell",children:'<span><span style="color: var(--shiki-color-text)">cargo run</span></span>\n<span></span>\n<span><span style="color: var(--shiki-color-text)">Rocket has launched from http://localhost:8000</span></span>\n<span></span>'})}),"\n",(0,o.jsxs)(s.p,{children:["It should say ",(0,o.jsx)(s.code,{children:"Hello World."}),"."]}),"\n",(0,o.jsx)(t.c,{url:"/assets/img/docs/nextjs-hello-world.png"}),"\n",(0,o.jsxs)(s.p,{children:["Great! ",(0,o.jsx)(s.code,{children:"process.env"})," now has the keys and values you defined in your ",(0,o.jsx)(s.code,{children:".env"})," file. That covers local development. Let's solve for production next."]}),"\n",(0,o.jsx)(s.h2,{id:"build-env-vault",children:"Build .env.vault"}),"\n",(0,o.jsxs)(s.p,{children:["Push your latest ",(0,o.jsx)(s.code,{children:".env"})," file changes and edit your production secrets. ",(0,o.jsx)(s.a,{href:"/docs/tutorials/sync",children:"Learn more about syncing"})]}),"\n",(0,o.jsx)(s.pre,{language:"shell",code:"npx dotenv-vault@latest push\nnpx dotenv-vault@latest open production\n",children:(0,o.jsx)(s.code,{className:"language-shell",children:'<span><span style="color: var(--shiki-color-text)">npx dotenv-vault@latest push</span></span>\n<span><span style="color: var(--shiki-color-text)">npx dotenv-vault@latest open production</span></span>\n<span></span>'})}),"\n",(0,o.jsx)(s.p,{children:"Use the UI to configure those secrets per environment."}),"\n",(0,o.jsx)(t.c,{url:"/assets/img/docs/edit-production-value.gif",www:"www.dotenv.org"}),"\n",(0,o.jsxs)(s.p,{children:["Then build your encrypted ",(0,o.jsx)(s.code,{children:".env.vault"})," file."]}),"\n",(0,o.jsx)(s.pre,{language:"shell",code:"npx dotenv-vault@latest build\n",children:(0,o.jsx)(s.code,{className:"language-shell",children:'<span><span style="color: var(--shiki-color-text)">npx dotenv-vault@latest build</span></span>\n<span></span>'})}),"\n",(0,o.jsx)(s.p,{children:"Its contents should look something like this."}),"\n",(0,o.jsx)(s.pre,{language:"shell",code:'#/-------------------.env.vault---------------------/\n#/         cloud-agnostic vaulting standard         /\n#/   [how it works](https://dotenv.org/env-vault)   /\n#/--------------------------------------------------/\n\n# development\nDOTENV_VAULT_DEVELOPMENT="/HqNgQWsf6Oh6XB9pI/CGkdgCe6d4/vWZHgP50RRoDTzkzPQk/xOaQs="\nDOTENV_VAULT_DEVELOPMENT_VERSION=2\n\n# production\nDOTENV_VAULT_PRODUCTION="x26PuIKQ/xZ5eKrYomKngM+dO/9v1vxhwslE/zjHdg3l+H6q6PheB5GVDVIbZg=="\nDOTENV_VAULT_PRODUCTION_VERSION=2\n',children:(0,o.jsx)(s.code,{className:"language-shell",children:'<span><span style="color: var(--shiki-token-comment)">#/-------------------.env.vault---------------------/</span></span>\n<span><span style="color: var(--shiki-token-comment)">#/         cloud-agnostic vaulting standard         /</span></span>\n<span><span style="color: var(--shiki-token-comment)">#/   [how it works](https://dotenv.org/env-vault)   /</span></span>\n<span><span style="color: var(--shiki-token-comment)">#/--------------------------------------------------/</span></span>\n<span></span>\n<span><span style="color: var(--shiki-token-comment)"># development</span></span>\n<span><span style="color: var(--shiki-color-text)">DOTENV_VAULT_DEVELOPMENT=</span><span style="color: var(--shiki-token-string-expression)">&quot;/HqNgQWsf6Oh6XB9pI/CGkdgCe6d4/vWZHgP50RRoDTzkzPQk/xOaQs=&quot;</span></span>\n<span><span style="color: var(--shiki-color-text)">DOTENV_VAULT_DEVELOPMENT_VERSION=2</span></span>\n<span></span>\n<span><span style="color: var(--shiki-token-comment)"># production</span></span>\n<span><span style="color: var(--shiki-color-text)">DOTENV_VAULT_PRODUCTION=</span><span style="color: var(--shiki-token-string-expression)">&quot;x26PuIKQ/xZ5eKrYomKngM+dO/9v1vxhwslE/zjHdg3l+H6q6PheB5GVDVIbZg==&quot;</span></span>\n<span><span style="color: var(--shiki-color-text)">DOTENV_VAULT_PRODUCTION_VERSION=2</span></span>\n<span></span>'}),title:".env.vault"}),"\n",(0,o.jsx)(s.h2,{id:"set-dotenv-key",children:"Set DOTENV_KEY"}),"\n",(0,o.jsxs)(s.p,{children:["Fetch your production ",(0,o.jsx)(s.code,{children:"DOTENV_KEY"}),"."]}),"\n",(0,o.jsx)(s.pre,{language:"shell",code:"npx dotenv-vault@latest keys production\n# outputs: dotenv://:key_1234@dotenv.org/vault/.env.vault?environment=production\n",children:(0,o.jsx)(s.code,{className:"language-shell",children:'<span><span style="color: var(--shiki-color-text)">npx dotenv-vault@latest keys production</span></span>\n<span><span style="color: var(--shiki-token-comment)"># outputs: dotenv://:key_1234@dotenv.org/vault/.env.vault?environment=production</span></span>\n<span></span>'})}),"\n",(0,o.jsxs)(s.p,{children:["Set ",(0,o.jsx)(s.code,{children:"DOTENV_KEY"})," on Heroku using the CLI."]}),"\n",(0,o.jsx)(s.pre,{language:"shell",code:"heroku config:set DOTENV_KEY='dotenv://:key_1234…@dotenv.org/vault/.env.vault?environment=production'\n",children:(0,o.jsx)(s.code,{className:"language-shell",children:'<span><span style="color: var(--shiki-color-text)">heroku config:set DOTENV_KEY=</span><span style="color: var(--shiki-token-string-expression)">&#39;dotenv://:key_1234…@dotenv.org/vault/.env.vault?environment=production&#39;</span></span>\n<span></span>'})}),"\n",(0,o.jsx)(s.p,{children:"Or use Heroku's UI."}),"\n",(0,o.jsx)(t.c,{url:"/assets/img/docs/heroku-config-vars.png",www:"www.heroku.com"}),"\n",(0,o.jsx)(s.h2,{id:"deploy",children:"Deploy"}),"\n",(0,o.jsx)(s.p,{children:"Commit those changes safely to code and deploy."}),"\n",(0,o.jsxs)(s.p,{children:["That's it! On deploy, your ",(0,o.jsx)(s.code,{children:".env.vault"})," file will be decrypted and its production secrets injected as environment variables‚ just in time."]}),"\n",(0,o.jsx)(t.c,{url:"/assets/img/docs/hello-production.png",www:"yourapp.herokuapp.com"}),"\n",(0,o.jsxs)(s.p,{children:["You'll know things worked correctly when you see ",(0,o.jsx)(s.code,{children:"'Loading env from encrypted .env.vault'"})," in your logs. If a ",(0,o.jsx)(s.code,{children:"DOTENV_KEY"})," is not set (for example when developing on your local machine) it will fall back to standard ",(0,o.jsx)(s.a,{href:"https://github.com/motdotla/dotenv",children:"dotenv"})," functionality."]}),"\n",(0,o.jsx)(t.c,{url:"/assets/img/docs/heroku-logs-vault-rust.png",www:"heroku logs --tail"}),"\n",(0,o.jsx)(r.default,{})]})}var h=!0;s.default=function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}=Object.assign({},(0,a.ah)(),n.components);return s?(0,o.jsx)(s,Object.assign({},n,{children:(0,o.jsx)(d,n)})):d(n)}},1490:function(n,s,e){"use strict";e.r(s),e.d(s,{__N_SSG:function(){return t}});var o=e(5893),a=e(1151);function r(n){let s=Object.assign({p:"p"},(0,a.ah)(),n.components),{Note:e}=s;return e||function(n,s){throw Error("Expected "+(s?"component":"object")+" `"+n+"` to be defined: you likely forgot to import, pass, or provide it.")}("Note",!0),(0,o.jsx)(e,{children:(0,o.jsx)(s.p,{children:"You succesfully used the new .env.vault standard to encrypt and deploy your secrets. This is much safer than scattering your secrets across multiple third-party platforms and tools. Whenever you need to add or change a secret, just rebuild your .env.vault file and redeploy."})})}var t=!0;s.default=function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}=Object.assign({},(0,a.ah)(),n.components);return s?(0,o.jsx)(s,Object.assign({},n,{children:(0,o.jsx)(r,n)})):r(n)}}},function(n){n.O(0,[5675,9774,2888,179],function(){return n(n.s=2178)}),_N_E=n.O()}]);